1ë‹¨ê³„. ì¤€ë¹„ í™•ì¸ (í•œ ë²ˆë§Œ)
Anaconda Prompt (Miniconda3) ì°½ì„ ì—¶

ì•„ë˜ê°€ ì •ìƒì´ì–´ì•¼ í•´:


conda activate lerobot
lerobot-replay --help
ë„ì›€ë§ì´ ëœ¨ë©´ OK.

2ë‹¨ê³„ í”„ë¡œì íŠ¸ í´ë” ë§Œë“¤ê¸°


conda activate lerobot
mkdir %USERPROFILE%\lerobot_web
cd %USERPROFILE%\lerobot_web

ì´ í´ë”ê°€ ë°±ì—”ë“œ/í”„ë¡ íŠ¸ì—”ë“œ íŒŒì¼ì´ ë†“ì¼ ê³³ì´ì•¼. (ê²½ë¡œ ì˜ˆ: C:\Users\ë©´íƒ\lerobot_web)

3ë‹¨ê³„

pip install flask

4ë‹¨ê³„: VS Codeì—ì„œ í´ë” ì—´ê¸°
VS Code ì‹¤í–‰

íŒŒì¼ â†’ í´ë” ì—´ê¸°
C:\Users\ë©´íƒ\lerobot_web ì„ íƒ

ì™¼ìª½ ì•„ë˜ íŒŒë€ë°” â†’ Python í™˜ê²½ ì„ íƒ
Python 3.10 ('lerobot': conda) ì„ íƒ



5ë‹¨ê³„: ë°±ì—”ë“œ ì„œë²„ íŒŒì¼ ë§Œë“¤ê¸°
VS Code ì™¼ìª½ íŒŒì¼ íƒìƒ‰ê¸°ì—ì„œ app.py ìƒˆ íŒŒì¼ ë§Œë“¤ê¸°

ì•„ë˜ ì½”ë“œ ë¶™ì—¬ë„£ê¸°

##################### ì´ê±°ë„£ì–´  íŒŒì¼ì´ë¦„ app.pyë¡œ ì €ì¥
from flask import Flask, render_template
import subprocess

app = Flask(__name__)

# ë²„íŠ¼ í´ë¦­ ì‹œ íŠ¹ì • episode ì¬ìƒ
@app.route("/replay/<int:episode>")
def replay(episode):
    cmd = [
        "lerobot-replay",
        "--robot.type=so101_follower",
        "--robot.port=COM3",
        "--robot.id=my_awesome_follower_arm",
        "--dataset.repo_id=localuser/record-test2",
        f"--dataset.episode={episode}"
    ]
    try:
        subprocess.run(cmd, check=True)
        return f"Episode {episode} ì‹¤í–‰ ì™„ë£Œ!"
    except subprocess.CalledProcessError as e:
        return f"ì‹¤í–‰ ì‹¤íŒ¨: {e}"

# ë©”ì¸ í˜ì´ì§€
@app.route("/")
def index():
    return render_template("index.html")

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=5000)

############################# 5ë‹¨ê³„
5ë‹¨ê³„: HTML ë§Œë“¤ê¸° (ë²„íŠ¼ UI)
lerobot_web ì•ˆì— templates í´ë” ë§Œë“¤ê¸° 
ê·¸ëŸ¬ë©´ lerobot_webì•ˆì— app.py ì½”ë“œí•˜ë‚˜ë‘ í´ë”ê°€ í•˜ë‚˜ìˆê² ì§€ templatesí´ë”
templates í´ë”ì•ˆì—
 index.html ë§Œë“¤ê¸°

ì•„ë˜ ì½”ë“œ ë¶™ì—¬ë„£ê¸°

#######################3
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ë¡œë´‡íŒ” Episode ì‹¤í–‰</title>
</head>
<body>
    <h1>ë¡œë´‡íŒ” Episode ì„ íƒ</h1>
    <button onclick="location.href='/replay/0'">Episode 0</button>
    <button onclick="location.href='/replay/1'">Episode 1</button>
    <button onclick="location.href='/replay/2'">Episode 2</button>
</body>
</html>

##############
6ë‹¨ê³„: ì„œë²„ ì‹¤í–‰
í„°ë¯¸ë„ì—ì„œ:

powershell

conda activate lerobot
python app.py
â†’ ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:5000 ì ‘ì†
â†’ ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ episode ë¦¬í”Œë ˆì´ ì‹¤í–‰   (0ë²ˆ ë²„íŠ¼ ì—í”¼ì†Œë“œ 1 1ë²ˆë²„íŠ¼ ì—í”¼ì†Œë“œ 2 .... 2ë²ˆë²„íŠ¼ ì—í”¼ì†Œë“œ 3)..

ğŸ’¡ ì´ ë°©ì‹ì´ë©´ ì•ìœ¼ë¡œ ë²„íŠ¼ì„ ë‚˜ë¼ë³„ë¡œ ë§Œë“¤ê³ , ê° ë²„íŠ¼ì´ ë‹¤ë¥¸ episode ë²ˆí˜¸ë¥¼ ì‹¤í–‰í•˜ë„ë¡ ìˆ˜ì • ê°€ëŠ¥í•´ìš”.
ì›í•˜ì‹œë©´ ì œê°€ ë‚˜ë¼ë³„ ë²„íŠ¼ + ë””ìì¸ê¹Œì§€ í•´ì„œ ë“œë¦´ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

ë°”ë¡œ ê·¸ë ‡ê²Œ í™•ì¥í• ê¹Œìš”?






ë‚˜ì˜ ë§:
template í´ë” ì–´ë””ë§Œë“¤ì–´
 í´ë”êµ¬ì¡°




í´ë” êµ¬ì¡° ì˜ˆì‹œ

C:\Users\ë©´íƒ\lerobot_web
â”‚  app.py
â”‚
â””â”€templates
    â”‚  index.html
ë§Œë“œëŠ” ë°©ë²• (VS Code ì•ˆì—ì„œ)
VS Code ì™¼ìª½ íŒŒì¼ íƒìƒ‰ê¸°ì—ì„œ lerobot_web í´ë” ìœ„ì— ë§ˆìš°ìŠ¤ ìš°í´ë¦­

ìƒˆ í´ë” ì„ íƒ

ì´ë¦„ì„ templatesë¡œ ì…ë ¥

templates í´ë” ìœ„ì— ë§ˆìš°ìŠ¤ ìš°í´ë¦­ â†’ ìƒˆ íŒŒì¼ â†’ index.html ì‘ì„±

ì œê°€ ì¤€ HTML ì½”ë“œ ë¶™ì—¬ë„£ê¸° â†’ ì €ì¥

ğŸ’¡ FlaskëŠ” templatesë¼ëŠ” í´ë”ëª…ì„ ìë™ìœ¼ë¡œ ì¸ì‹í•´ì„œ HTML íŒŒì¼ì„ ì°¾ê¸° ë•Œë¬¸ì— ê¼­ ì´ ì´ë¦„ìœ¼ë¡œ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.
ë°”ë¡œ ì´ëŒ€ë¡œ í•˜ì‹¤ë˜ìš”? ê·¸ëŸ¬ë©´ ë‹¤ìŒ ë‹¨ê³„ì—ì„œ python app.py ì‹¤í–‰í•´ì„œ ì›¹ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.






ë‚˜ì˜ ë§:
ì˜¤ ë§Œë“¤ì–´ì§ ì—°ê²°í•´ë°”
4ë‹¨ê³„ê³„ ë°±ì—”ë“œ íŒŒì¼ ë§Œë“¤ê¸°: app.py
ì•„ë˜ë¥¼ ê·¸ëŒ€ë¡œ ë³µì‚¬í•´ì„œ C:\Users\ë©´íƒ\lerobot_web\app.pyë¡œ ì €ì¥.




############################################   ì´ê±° ë³µì‚¬í•´ì„œ  %USERPROFILE%\lerobot_web ì´ ê²½ë¡œì•ˆì—ì„œ app.py íŒŒì¼ ë§Œë“¤ê¸°  visual studioë¡œ í•˜ë©´í¸í•¨
from flask import Flask, render_template, request, jsonify
import subprocess, threading

app = Flask(__name__)

# â˜… ë„¤ í™˜ê²½ì— ë§ê²Œ ê³ ì • ê°’ (ìš°ë¦¬ê°€ ì´ë¯¸ í™•ì¸í•œ ê°’ë“¤)
ROBOT_PORT = "COM3"  # follower
LEADER_PORT = "COM4" # teleop
ROBOT_ID = "my_awesome_follower_arm"
LEADER_ID = "my_awesome_leader_arm"
DATASET_REPO_ID = "localuser/record-test2"  # ë¡œì»¬ ì €ì¥ ì´ë¦„(ì•ì„œ ë§Œë“  ê²ƒ)

# ë™ì‹œ ì‹¤í–‰ ë°©ì§€ìš© ë½(í•œ ë²ˆì— í•˜ë‚˜ë§Œ ì¬ìƒ)
lock = threading.Lock()

def run_replay(ep: int) -> int:
    """ì§€ì • ì—í”¼ì†Œë“œë¥¼ ë™ê¸° ì‹¤í–‰(ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼). ì¢…ë£Œ ì½”ë“œë¥¼ ë°˜í™˜"""
    cmd = [
        "lerobot-replay",
        f"--robot.type=so101_follower",
        f"--robot.port={ROBOT_PORT}",
        f"--robot.id={ROBOT_ID}",
        f"--dataset.repo_id={DATASET_REPO_ID}",
        f"--dataset.episode={ep}",
    ]
    # ì™„ë£Œê¹Œì§€ ëŒ€ê¸°(ìˆœì°¨ ì¬ìƒì— í•„ìš”)
    return subprocess.call(cmd)

@app.route("/")
def index():
    # ë©”ì¸ í˜ì´ì§€ (templates/index.html ë Œë”)
    return render_template("index.html")

@app.route("/replay/<int:ep>", methods=["POST"])
def replay_single(ep: int):
    # ë‹¨ì¼ ì—í”¼ì†Œë“œ ì¬ìƒ (ë¹„ë™ê¸° ì‹œì‘: ë°”ë¡œ ì‘ë‹µ)
    if lock.locked():
        return ("ì´ë¯¸ ì¬ìƒ ì¤‘ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.", 409)
    threading.Thread(target=lambda: (lock.acquire(), run_replay(ep), lock.release()), daemon=True).start()
    return f"Episode {ep} ì¬ìƒ ì‹œì‘"

@app.route("/replay-seq", methods=["POST"])
def replay_sequence():
    """
    ìˆœì°¨ ì¬ìƒ: ì˜ˆ) eps=0,1,2
    ìš”ì²­ ì˜ˆ: POST /replay-seq?eps=0,1,2
    """
    eps = request.args.get("eps", "")
    try:
        order = [int(x.strip()) for x in eps.split(",") if x.strip() != ""]
        assert len(order) > 0
    except Exception:
        return ("eps íŒŒë¼ë¯¸í„°ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤. ì˜ˆ: /replay-seq?eps=0,1,2", 400)

    if lock.locked():
        return ("ì´ë¯¸ ì¬ìƒ ì¤‘ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.", 409)

    def worker():
        lock.acquire()
        try:
            for ep in order:
                rc = run_replay(ep)
                # ì‹¤íŒ¨í•´ë„ ë‹¤ìŒìœ¼ë¡œ ê°ˆì§€ ì¤‘ë‹¨í• ì§€ ì •ì±… ì„ íƒ ê°€ëŠ¥. ì—¬ê¸°ì„  ì¤‘ë‹¨.
                if rc != 0:
                    break
        finally:
            lock.release()

    threading.Thread(target=worker, daemon=True).start()
    return f"ìˆœì°¨ ì¬ìƒ ì‹œì‘: {order}"
    
if __name__ == "__main__":
    # ë¡œì»¬ ê°œë°œìš© ì„œë²„ ì‹¤í–‰
    app.run(host="0.0.0.0", port=5000)
####################################################################### ì—¬ê¸°ê¹Œì§€ 

4ë‹¨ê³„ê³„ í”„ë¡ íŠ¸ì—”ë“œ(ë²„íŠ¼ í˜ì´ì§€) ë§Œë“¤ê¸°: templates/index.html
í´ë”ë¥¼ ë§Œë“¤ê³  íŒŒì¼ì„ ì €ì¥í•´.


mkdir %USERPROFILE%\lerobot_web\templates
ê·¸ ë‹¤ìŒ C:\Users\ë©´íƒ\lerobot_web\templates\index.html ë‚´ìš©:

html
ë³µì‚¬
í¸ì§‘
<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>LeRobot Replay</title>
  <style>
    body { font-family: sans-serif; max-width: 720px; margin: 24px auto; }
    h1 { margin-bottom: 8px; }
    button { padding: 10px 16px; margin: 6px; cursor: pointer; }
    #log { white-space: pre-wrap; background:#f6f6f6; padding:12px; border-radius:8px; }
  </style>
</head>
<body>
  <h1>ë¡œë´‡ ë¦¬í”Œë ˆì´ ì»¨íŠ¸ë¡¤</h1>
  <p>ì›í•˜ëŠ” ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í•´ë‹¹ ì—í”¼ì†Œë“œê°€ ì¬ìƒë©ë‹ˆë‹¤.</p>

  <h2>ë‹¨ì¼ ì¬ìƒ</h2>
  <button onclick="playOne(0)">Episode 0 (í‘œì‹œìƒ 1)</button>
  <button onclick="playOne(1)">Episode 1 (í‘œì‹œìƒ 2)</button>
  <button onclick="playOne(2)">Episode 2 (í‘œì‹œìƒ 3)</button>

  <h2>ìˆœì°¨ ì¬ìƒ</h2>
  <button onclick="playSeq('0,1,2')">0 â†’ 1 â†’ 2</button>

  <h3>ìƒíƒœ</h3>
  <div id="log">ì¤€ë¹„ ì™„ë£Œ</div>

  <script>
    async function playOne(ep){
      const res = await fetch(`/replay/${ep}`, {method:'POST'});
      document.getElementById('log').textContent = await res.text();
    }
    async function playSeq(eps){
      const res = await fetch(`/replay-seq?eps=${encodeURIComponent(eps)}`, {method:'POST'});
      document.getElementById('log').textContent = await res.text();
    }
  </script>
</body>
</html>
5) ì„œë²„ ì‹¤í–‰
Anaconda Promptì—ì„œ:

bat
ë³µì‚¬
í¸ì§‘
conda activate lerobot
cd %USERPROFILE%\lerobot_web
python app.py
Windows ë°©í™”ë²½ íŒì—…ì´ ëœ¨ë©´ â€œí—ˆìš©â€ì„ ëˆŒëŸ¬ì¤˜.

ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:5000 ì ‘ì† â†’ ë²„íŠ¼ ë³´ì´ë©´ ì„±ê³µ!

ì¤‘ìš”: ì§€ê¸ˆ ì½”ë“œëŠ” í•œ ë²ˆì— í•˜ë‚˜ë§Œ ì¬ìƒë˜ë„ë¡ ì ê¸ˆ(lock)ì„ ê±¸ì—ˆì–´.
ì‹¤í–‰ ì¤‘ì—” â€œì´ë¯¸ ì¬ìƒ ì¤‘ì…ë‹ˆë‹¤(409)â€ê°€ ëœ¨ëŠ” ê²Œ ì •ìƒì´ì•¼.

6) ì‚¬ìš©ë²•
ë‹¨ì¼ ì¬ìƒ: Episode 0/1/2 ë²„íŠ¼

ìˆœì°¨ ì¬ìƒ: â€œ0â†’1â†’2â€ ë²„íŠ¼
(ì›í•˜ëŠ” ìˆœì„œë¥¼ ë°”ê¾¸ê³  ì‹¶ìœ¼ë©´ index.htmlì—ì„œ playSeq('0,2,1')ì²˜ëŸ¼ ìˆ˜ì •)

7) ì¢…ë£Œ/ì¬ì‹œì‘
ì„œë²„ ë„ê¸°: ì„œë²„ ë„ìš´ ì½˜ì†”ì—ì„œ Ctrl + C

ë‹¤ì‹œ ì‹œì‘: python app.py

ë‹¤ë¥¸ PC/í°ì—ì„œë„ ê°™ì€ ë„¤íŠ¸ì›Œí¬ë¼ë©´ http://<ì´PCì˜ IP>:5000ë¡œ ì ‘ì† ê°€ëŠ¥

8) ë‚´ í™˜ê²½ê³¼ ë‹¤ë¥¼ ë•Œ ë°”ê¿€ ê³³
app.py ë§¨ ìœ„ì˜ ìƒìˆ˜ë“¤:

python
ë³µì‚¬
í¸ì§‘
ROBOT_PORT = "COM3"
LEADER_PORT = "COM4"
ROBOT_ID = "my_awesome_follower_arm"
LEADER_ID = "my_awesome_leader_arm"
DATASET_REPO_ID = "localuser/record-test2"
í¬íŠ¸/ID/ë°ì´í„°ì…‹ ì´ë¦„ ë°”ê¾¸ë©´ ë¨ (ì§€ê¸ˆì€ ìš°ë¦¬ê°€ í™•ì¸í•œ ê°’ìœ¼ë¡œ ì„¤ì •í•´ë‘ )

